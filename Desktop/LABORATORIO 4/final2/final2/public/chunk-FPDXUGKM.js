import{$ as d,$a as Z,Aa as ve,Ba as H,C as ue,D as x,Da as Ce,G as k,H as c,J as _e,K as de,L as z,M as Y,N as fe,P as g,Q as I,R as p,S as Q,Sa as pe,T as M,Ta as B,U as a,Ua as W,V as n,Va as K,W as m,Wa as q,X as ge,Y as he,Ya as C,Z as b,Za as U,_ as f,_a as X,ab as ee,bb as Se,cb as Ee,db as te,eb as ie,fa as s,fb as Te,ga as E,gb as ne,ha as S,ia as P,ja as A,ka as R,kb as oe,la as N,lb as we,mb as ye,na as be,nb as ae,ob as L,qa as xe,ra as T,s as J,ta as w,v as y,x as u,y as _,ya as j,za as $}from"./chunk-AXYHVUF3.js";import"./chunk-X5YLR3NI.js";import{a as F,b as O,i as h}from"./chunk-ODN5LVDJ.js";var V=class i{constructor(t,e){this.el=t;this.rd=e}brWidth=100;brHeight=40;display="inline-block";get w(){return this.brWidth}get h(){return this.brHeight}borderRadius="8px";border="none";padding="0.5rem 1rem";bg="#f0f0f0";boxShadow="0 2px 6px rgba(0, 0, 0, 0.15)";transition="transform 0.15s ease, box-shadow 0.15s ease";cursor="pointer";textAlign="center";fontWeight="500";ngAfterViewInit(){this.rd.listen(this.el.nativeElement,"mouseenter",()=>{this.rd.setStyle(this.el.nativeElement,"transform","translateY(-2px)"),this.rd.setStyle(this.el.nativeElement,"boxShadow","0 4px 8px rgba(0,0,0,0.2)")}),this.rd.listen(this.el.nativeElement,"mouseleave",()=>{this.rd.setStyle(this.el.nativeElement,"transform","translateY(0)"),this.rd.setStyle(this.el.nativeElement,"boxShadow","0 2px 6px rgba(0, 0, 0, 0.15)")})}static \u0275fac=function(e){return new(e||i)(de(ue),de(_e))};static \u0275dir=fe({type:i,selectors:[["","botonesRectangulares",""]],hostVars:24,hostBindings:function(e,o){e&2&&Q("display",o.display)("width",o.w,"px")("height",o.h,"px")("border-radius",o.borderRadius)("border",o.border)("padding",o.padding)("background-color",o.bg)("box-shadow",o.boxShadow)("transition",o.transition)("cursor",o.cursor)("text-align",o.textAlign)("font-weight",o.fontWeight)},inputs:{brWidth:"brWidth",brHeight:"brHeight"}})};var De=()=>[1,2,3,4,5],Ae=(i,t,e,o)=>({"background-color":i,"border-color":t,color:e,cursor:o});function Re(i,t){if(i&1&&m(0,"app-mensaje",16),i&2){let e=t.ngIf;p("tipo",e.tipo)("mensaje",e.texto)}}function Ne(i,t){if(i&1){let e=b();a(0,"button",17),f("click",function(){let r=u(e).$implicit,l=d();return _(l.seleccionarEspecialidad(r.nombre))}),m(1,"img",18),n()}if(i&2){let e=t.$implicit;I("aria-label",e.nombre),c(),p("src",e.imagen_url||"/assets/img/placeholder-esp.png",k)("alt",e.nombre)}}function ze(i,t){if(i&1){let e=b();a(0,"div",22)(1,"button",23),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarEspecialista(r))}),m(2,"img",18),n(),a(3,"small",24),s(4),n()()}if(i&2){let e=t.$implicit;c(),I("aria-label",`${e.nombre} ${e.apellido}`),c(),p("src",e.avatar_url||"/assets/img/placeholder-user.png",k)("alt",`${e.nombre} ${e.apellido}`),c(2),P(" ",e.nombre," ",e.apellido," ")}}function je(i,t){if(i&1&&(a(0,"div",12)(1,"label",19),s(2,"Especialistas"),n(),a(3,"div",20),g(4,ze,5,5,"div",21),n()()),i&2){let e=d();c(4),p("ngForOf",e.especialistasFiltrados())}}function $e(i,t){i&1&&(a(0,"div",25),m(1,"div",26),a(2,"div",27),s(3,"Cargando..."),n()())}function He(i,t){if(i&1){let e=b();a(0,"button",30),T(1,"date"),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarFecha(r))}),s(2),T(3,"date"),n()}if(i&2){let e=t.$implicit,o=d(2);M("active",e===o.fechaSeleccionada),I("aria-label","Fecha "+w(1,4,e,"fullDate")),c(2),S(" ",w(3,7,e,"dd/MM")," ")}}function Be(i,t){if(i&1&&(a(0,"div",12)(1,"label",19),s(2,"Fechas disponibles"),n(),a(3,"div",28),g(4,He,4,10,"button",29),n()()),i&2){let e=d();c(4),p("ngForOf",e.fechasDisponibles())}}function We(i,t){if(i&1){let e=b();a(0,"button",32),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarHorario({horario:r,fecha:l.fechaSeleccionada}))}),s(1),n()}if(i&2){let e=t.$implicit,o=d(2);c(),S(" ",o.formatearHora(e)," ")}}function qe(i,t){if(i&1&&(a(0,"div",12)(1,"label",19),s(2,"Horarios disponibles"),n(),a(3,"div",28),g(4,We,2,1,"button",31),n()()),i&2){let e=d();c(4),p("ngForOf",e.horasParaFecha())}}function Ue(i,t){if(i&1){let e=b();a(0,"div",33),s(1," \xBFConfirm\xE1s solicitar un turno con el especialista "),a(2,"strong"),s(3),n(),s(4," el "),a(5,"strong"),s(6),T(7,"date"),n(),s(8," a las "),a(9,"strong"),s(10),n(),s(11,"? "),a(12,"div",34)(13,"button",35),f("click",function(){u(e);let r=d();return _(r.confirmarTurno())}),s(14,"Confirmar"),n(),a(15,"button",36),f("click",function(){u(e);let r=d();return _(r.cancelarSeleccion())}),s(16,"Cancelar"),n()()()}if(i&2){let e=d();c(3),E(e.nombreEspecialistaSeleccionado),c(3),E(w(7,3,e.horarioSeleccionado.fecha,"fullDate")),c(4),E(e.horarioSeleccionado.horario)}}function Le(i,t){if(i&1){let e=b();a(0,"div",43)(1,"input",44),N("ngModelChange",function(r){u(e);let l=d().$implicit;return R(l.motivo_cancelacion,r)||(l.motivo_cancelacion=r),_(r)}),n(),a(2,"button",45),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.cancelarTurno(r))}),s(3,"Cancelar turno"),n()()}if(i&2){let e=d().$implicit;c(),A("ngModel",e.motivo_cancelacion)}}function Ge(i,t){if(i&1){let e=b();a(0,"div",43)(1,"input",46),N("ngModelChange",function(r){u(e);let l=d().$implicit;return R(l.comentario_paciente,r)||(l.comentario_paciente=r),_(r)}),n(),a(2,"button",47),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.calificarTurno(r))}),s(3,"Calificar atenci\xF3n"),n()()}if(i&2){let e=d().$implicit;c(),A("ngModel",e.comentario_paciente)}}function Je(i,t){if(i&1){let e=b();a(0,"div",43)(1,"button",48),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.verResena(r))}),s(2,"Ver rese\xF1a"),n()()}}function Ye(i,t){if(i&1){let e=b();a(0,"button",51),f("click",function(){u(e);let r=d(2).$implicit,l=d();return _(l.abrirEncuesta(r))}),s(1,"Completar encuesta"),n()}}function Qe(i,t){i&1&&(a(0,"span",52),s(1,"Encuesta completada"),n())}function Ke(i,t){if(i&1&&(a(0,"div",43),g(1,Ye,2,0,"button",49)(2,Qe,2,0,"span",50),n()),i&2){let e=d().$implicit;c(),p("ngIf",!e.completadaEncuesta),c(),p("ngIf",e.completadaEncuesta)}}function Xe(i,t){if(i&1&&(a(0,"div",37)(1,"div",38)(2,"h5",39),s(3),n(),a(4,"p",40)(5,"strong"),s(6,"Especialista:"),n(),s(7),m(8,"br"),a(9,"strong"),s(10,"Fecha:"),n(),s(11),T(12,"date"),m(13,"br"),a(14,"strong"),s(15,"Hora:"),n(),s(16),n(),a(17,"span",41),s(18),n(),g(19,Le,4,1,"div",42)(20,Ge,4,1,"div",42)(21,Je,3,0,"div",42)(22,Ke,3,2,"div",42),n()()),i&2){let e=t.$implicit;c(3),E(e.especialidad),c(4),S(" ",e.nombre_especialista,""),c(4),S(" ",w(12,9,e.fecha_turno,"fullDate"),""),c(5),S(" ",e.hora_turno," "),c(2),E(e.estado),c(),p("ngIf",e.estado==="solicitado"),c(),p("ngIf",e.estado==="realizado"&&!e.calificacion_paciente),c(),p("ngIf",e.estado==="realizado"&&e.comentario_especialista),c(),p("ngIf",e.estado==="realizado"&&!e.tiene_encuesta)}}function Ze(i,t){if(i&1&&(ge(0),m(1,"input",79),a(2,"label",80)(3,"span"),s(4,"\u2605"),n()(),he()),i&2){let e,o=t.$implicit,r=d(2);c(),p("id","estrella"+o)("value",o),c(),p("for","estrella"+o),c(),Q("color",o<=((e=r.encuestaForm.get("estrellas"))==null?null:e.value)?"#ffc107":"#ccc")}}function et(i,t){if(i&1&&(a(0,"div",81),m(1,"input",82),a(2,"label",83),s(3),n()()),i&2){let e=t.$implicit,o=t.index;c(),p("formControlName",o)("id","aspecto"+e.value),c(),p("for","aspecto"+e.value),c(),E(e.label)}}function tt(i,t){i&1&&(a(0,"span",84),s(1,"Bajo"),n())}function it(i,t){i&1&&(a(0,"span",85),s(1,"Medio"),n())}function nt(i,t){i&1&&(a(0,"span",52),s(1,"Alto"),n())}function ot(i,t){i&1&&(a(0,"div",86),m(1,"div",87),s(2," Guardando\u2026 "),n())}function at(i,t){if(i&1&&(a(0,"small",88),s(1),n()),i&2){let e=d(2);c(),E(e.mensajeEncuesta)}}function rt(i,t){if(i&1){let e=b();a(0,"div",53)(1,"div",54)(2,"h5",12),s(3,"Encuesta de satisfacci\xF3n"),n(),a(4,"form",55)(5,"div",56)(6,"label",57),s(7,"Comentario sobre la atenci\xF3n"),n(),m(8,"textarea",58),n(),a(9,"div",12)(10,"label",59),s(11,"Calificaci\xF3n general"),n(),a(12,"div",60),g(13,Ze,5,5,"ng-container",61),n()(),a(14,"div",12)(15,"label",59),s(16,"\xBFVolver\xEDas a atenderte aqu\xED?"),n(),a(17,"div",62),m(18,"input",63),a(19,"label",64),s(20,"S\xED"),n()(),a(21,"div",62),m(22,"input",65),a(23,"label",66),s(24,"No"),n()()(),a(25,"div",56)(26,"label",59),s(27,"\xBFQu\xE9 aspectos te gustaron?"),n(),a(28,"div",67),g(29,et,4,4,"div",68),n()(),a(30,"div",12)(31,"label",69),s(32,"Nivel de satisfacci\xF3n"),n(),m(33,"input",70),a(34,"span",71),s(35),g(36,tt,2,0,"span",72)(37,it,2,0,"span",73)(38,nt,2,0,"span",50),n()()(),g(39,ot,3,0,"div",74)(40,at,2,1,"small",75),m(41,"br"),a(42,"div",76)(43,"button",77),f("click",function(){u(e);let r=d();return _(r.enviarEncuesta())}),s(44," Enviar "),n(),a(45,"button",78),f("click",function(){u(e);let r=d();return _(r.cancelarEncuesta())}),s(46,"Cancelar"),n()()()()}if(i&2){let e,o,r,l,v=d();c(4),p("formGroup",v.encuestaForm),c(9),p("ngForOf",be(12,De)),c(16),p("ngForOf",v.aspectosOpciones),c(6),S(" ",((e=v.encuestaForm.get("satisfaccion"))==null?null:e.value)||5,"/10 "),c(),p("ngIf",((o=v.encuestaForm.get("satisfaccion"))==null?null:o.value)<=3),c(),p("ngIf",((r=v.encuestaForm.get("satisfaccion"))==null?null:r.value)>3&&((r=v.encuestaForm.get("satisfaccion"))==null?null:r.value)<8),c(),p("ngIf",((l=v.encuestaForm.get("satisfaccion"))==null?null:l.value)>=8),c(),p("ngIf",v.cargandoEncuesta),c(),p("ngIf",v.mensajeEncuesta),c(3),p("ngStyle",xe(13,Ae,v.encuestaForm.invalid||v.cargandoEncuesta?"#bdbdbd":"#198754",v.encuestaForm.invalid||v.cargandoEncuesta?"#bdbdbd":"#198754",(v.encuestaForm.invalid||v.cargandoEncuesta,"#fff"),v.encuestaForm.invalid||v.cargandoEncuesta?"not-allowed":"pointer"))("disabled",v.encuestaForm.invalid||v.cargandoEncuesta),c(2),p("disabled",v.cargandoEncuesta)}}var re=class i{dbService=y(B);credencialesService=y(W);fb=y(oe);turnos=x([]);especialidades=x([]);especialistasFiltrados=x([]);fechasDisponibles=x([]);horariosDisponibles=x([]);horariosPorDia=x([]);mensaje=x(null);especialistaSeleccionado=null;nombreEspecialistaSeleccionado="";especialidadSeleccionada=null;horarioSeleccionado=null;fechaSeleccionada=null;loadingFechas=!1;encuestaModalVisible=x(!1);encuestaForm;aspectosOpciones=[{label:"Rapidez",value:"rapidez"},{label:"Amabilidad",value:"amabilidad"},{label:"Instalaciones",value:"instalaciones"}];turnoEncuesta=null;cargandoEncuesta=!1;mensajeEncuesta="";horariosProcesados=[];opciones12=["Muy buena","Buena","Mala","Muy mala"];opciones3=["S\xED","Puede ser","No"];usuarioActual=null;diasES=["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"];ngOnInit(){return h(this,null,function*(){this.usuarioActual=yield this.credencialesService.getUsuarioActualAsync(),console.log("PASO getUsuarioActualAsync"),this.usuarioActual&&(yield this.actualizarTurnos()),console.log("PASO actualizarTurnos");let t=yield this.dbService.obtenerEspecialidadesConImagen();this.especialidades.set(t.slice(0,10)),this.encuestaForm=this.fb.group({comentario:["",C.required],estrellas:[0,C.required],volveria:["",C.required],aspectos:this.fb.array(this.aspectosOpciones.map(()=>!1),[C.required]),satisfaccion:[5,C.required]})})}seleccionarEspecialidad(t){this.especialidadSeleccionada=t,this.resetHorarios(),this.filtrarEspecialistas()}seleccionarEspecialista(t){return h(this,null,function*(){this.especialistaSeleccionado=t,this.nombreEspecialistaSeleccionado=`${t.nombre} ${t.apellido}`,this.resetHorarios(),this.loadingFechas=!0,console.log("antes de  obtenerFechasDisponibles");let e=yield this.dbService.obtenerFechasDisponibles(t.user_auth_id,14);if(console.log("despues de  obtenerFechasDisponibles"),this.loadingFechas=!1,!e.length){this.mensaje.set({texto:"El especialista no tiene horarios disponibles en los pr\xF3ximos 15 d\xEDas.",tipo:"warning"});return}this.fechasDisponibles.set(e)})}seleccionarFecha(t){return h(this,null,function*(){this.fechaSeleccionada=t;try{let o=(yield this.dbService.obtenerHorariosDisponibles(this.especialistaSeleccionado.user_auth_id,t))?.map(r=>r.horario_disponible)||[];this.horariosDisponibles.set(o)}catch(e){console.error("Error al obtener horarios disponibles:",e)}})}horasParaFecha(){return this.horariosDisponibles()}seleccionarHorario(t){console.log("Horario seleccionado:",t),this.horarioSeleccionado=t}confirmarTurno(){return h(this,null,function*(){if(!this.usuarioActual||!this.especialistaSeleccionado||!this.horarioSeleccionado)return;let t=`${this.horarioSeleccionado.fecha}T${this.horarioSeleccionado.horario}`,e={paciente_id:this.usuarioActual.id,especialista_id:this.especialistaSeleccionado.user_auth_id,especialidad:this.especialidadSeleccionada,fecha_hora:t,estado:"solicitado"};yield this.dbService.solicitarTurno(e),yield this.actualizarTurnos(),this.mensaje.set({texto:"Turno solicitado con \xE9xito.",tipo:"success"}),this.cancelarSeleccion()})}cancelarTurno(t){return h(this,null,function*(){if(!t.motivo_cancelacion?.trim()){this.mensaje.set({texto:"Por favor, ingrese un motivo para cancelar el turno.",tipo:"error"});return}yield this.dbService.cancelarTurno(t.id,t.motivo_cancelacion),yield this.actualizarTurnos(),this.mensaje.set({texto:"El turno fue cancelado correctamente.",tipo:"success"})})}calificarTurno(t){return h(this,null,function*(){if(console.log("CalificaTurnos 1"),!t.comentario_paciente?.trim()){this.resetMensaje(),this.mensaje.set({texto:"Por favor, ingrese un comentario para calificar la atenci\xF3n.",tipo:"error"});return}yield this.dbService.guardarCalificacion(t.id,t.comentario_paciente),yield this.actualizarTurnos(),this.resetMensaje(),this.mensaje.set({texto:"Gracias por calificar la atenci\xF3n.",tipo:"success"})})}resetMensaje(){this.mensaje.set(null)}verResena(t){this.mensaje.set(null),setTimeout(()=>{this.mensaje.set({texto:`Rese\xF1a del especialista:

${t.comentario_especialista}`,tipo:"info"})})}abrirEncuesta(t){this.turnoEncuesta=t,this.encuestaForm.reset(),this.mensajeEncuesta="",this.encuestaModalVisible.set(!0)}cancelarEncuesta(){this.encuestaModalVisible.set(!1)}enviarEncuesta(){return h(this,null,function*(){if(this.turnoEncuesta&&!this.encuestaForm.invalid){this.cargandoEncuesta=!0,this.mensajeEncuesta="";try{let t=this.encuestaForm.value.aspectos,e=this.aspectosOpciones.filter((r,l)=>t[l]).map(r=>r.label),o={turno_id:this.turnoEncuesta.id,comentario:this.encuestaForm.value.comentario,estrellas:this.encuestaForm.value.estrellas,volveria:this.encuestaForm.value.volveria,aspectos:e,satisfaccion:this.encuestaForm.value.satisfaccion};console.log("Payload encuesta a Supabase:",o),yield this.dbService.crearEncuesta(o),this.turnoEncuesta.completadaEncuesta=!0,this.mensajeEncuesta="Encuesta enviada \u2714",this.encuestaModalVisible.set(!1)}catch{this.mensajeEncuesta="Error al guardar la encuesta."}finally{this.cargandoEncuesta=!1}}})}actualizarTurnos(){return h(this,null,function*(){if(!this.usuarioActual)return;let e=(yield this.dbService.obtenerTurnosPorUsuario(this.usuarioActual.id,"paciente")).map(o=>O(F({},o),{fecha_turno:new Date(o.fecha_hora),hora_turno:new Date(o.fecha_hora).toTimeString().substring(0,5),completadaEncuesta:!!o.encuesta_id,calificacion_paciente:o.calificacion_paciente}));this.turnos.set(e)})}filtrarEspecialistas(){return h(this,null,function*(){if(!this.especialidadSeleccionada)return;let t=yield this.dbService.obtenerEspecialistasPorEspecialidad(this.especialidadSeleccionada);this.especialistasFiltrados.set(t)})}cancelarSeleccion(){this.resetHorarios(),this.especialidadSeleccionada=null,this.especialistaSeleccionado=null,this.nombreEspecialistaSeleccionado=""}resetHorarios(){this.horariosDisponibles.set([]),this.fechasDisponibles.set([]),this.horariosPorDia.set([]),this.horarioSeleccionado=null}formatearHora(t){let[e,o]=t.split(":"),r=+e,l=r>=12?"pm":"am";return r=r%12,r===0&&(r=12),`${r.toString().padStart(2,"0")}:${o} ${l}`}cerrarSesion(){return h(this,null,function*(){yield this.credencialesService.logout(),window.location.href="/home"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=z({type:i,selectors:[["app-mis-turnos-paciente"]],standalone:!1,decls:22,vars:9,consts:[[1,"turnos-wrapper"],[1,"btn-salir",3,"click"],[1,"turnos-card"],[1,"text-center","mb-4"],[3,"tipo","mensaje",4,"ngIf"],[1,"panel-seleccion"],[1,"d-flex","flex-wrap","gap-3","mb-3"],["botonesRedondos","","class","especialidad-btn",3,"click",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],["class","spinner-wrapper text-center my-4",4,"ngIf"],["class","alert alert-warning mt-3",4,"ngIf"],[1,"panel-turnos"],[1,"mb-3"],[1,"turnos-grid"],["class","card turno-card",4,"ngFor","ngForOf"],["class","modal-backdrop",4,"ngIf"],[3,"tipo","mensaje"],["botonesRedondos","",1,"especialidad-btn",3,"click"],["loading","lazy",3,"src","alt"],[1,"form-label"],[1,"d-flex","flex-wrap","gap-3"],["class","especialista-card text-center",4,"ngFor","ngForOf"],[1,"especialista-card","text-center"],["botonesRedondos","",1,"especialista-btn",3,"click"],[1,"nombre-label","mt-1","d-block"],[1,"spinner-wrapper","text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"fechas-container"],["botonesRectangulares","","class","fecha-btn",3,"active","click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"fecha-btn",3,"click"],["botonesRectangulares","","class","hora-btn",3,"click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"hora-btn",3,"click"],[1,"alert","alert-warning","mt-3"],[1,"mt-3","d-flex","gap-2"],["botonesRectangulares","",1,"btn","btn-success","btn-sm",3,"click"],["botonesRectangulares","",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"card","turno-card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-info","text-dark"],["class","acciones-turno",4,"ngIf"],[1,"acciones-turno"],["placeholder","Motivo de cancelaci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["botonesRectangulares","",1,"btn","btn-danger","btn-sm","action-btn",3,"click"],["placeholder","Tu comentario sobre la atenci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["botonesRectangulares","",1,"btn","btn-primary","btn-sm","action-btn",3,"click"],["botonesRectangulares","",1,"btn","btn-info","btn-sm","action-btn",3,"click"],["class","btn btn-secondary btn-sm action-btn","botonesRectangulares","",3,"click",4,"ngIf"],["class","badge bg-success ms-2",4,"ngIf"],["botonesRectangulares","",1,"btn","btn-secondary","btn-sm","action-btn",3,"click"],[1,"badge","bg-success","ms-2"],[1,"modal-backdrop"],[1,"modal-card"],[3,"formGroup"],[1,"mb-4"],["for","comentario",1,"form-label"],["id","comentario","formControlName","comentario","rows","4","placeholder","Escribe tu opini\xF3n",1,"form-control",2,"min-width","100%","min-height","80px","resize","vertical","margin-bottom","1.2rem"],[1,"form-label","d-block"],[1,"d-flex","align-items-center","gap-2"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],["type","radio","formControlName","volveria","id","volveriaSi","value","si",1,"form-check-input"],["for","volveriaSi",1,"form-check-label"],["type","radio","formControlName","volveria","id","volveriaNo","value","no",1,"form-check-input"],["for","volveriaNo",1,"form-check-label"],["formArrayName","aspectos"],["class","form-check mb-2",4,"ngFor","ngForOf"],["for","satisfaccion",1,"form-label"],["type","range","id","satisfaccion","min","1","max","10","formControlName","satisfaccion",1,"form-range"],[1,"ms-2"],["class","badge bg-danger ms-2",4,"ngIf"],["class","badge bg-warning text-dark ms-2",4,"ngIf"],["class","text-center my-2",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"d-flex","gap-2","mt-3"],[1,"btn","btn-success",3,"click","ngStyle","disabled"],[1,"btn","btn-secondary",3,"click","disabled"],["type","radio","formControlName","estrellas",2,"display","none",3,"id","value"],[2,"font-size","2rem","cursor","pointer",3,"for"],[1,"form-check","mb-2"],["type","checkbox",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label",3,"for"],[1,"badge","bg-danger","ms-2"],[1,"badge","bg-warning","text-dark","ms-2"],[1,"text-center","my-2"],[1,"spinner-border","spinner-border-sm"],[1,"text-success"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"button",1),f("click",function(){return o.cerrarSesion()}),s(2,"Salir"),n(),a(3,"div",2)(4,"h2",3),s(5,"Mis Turnos"),n(),g(6,Re,1,2,"app-mensaje",4),a(7,"section",5)(8,"div",6),g(9,Ne,2,3,"button",7),n(),g(10,je,5,1,"div",8)(11,$e,4,0,"div",9)(12,Be,5,1,"div",8)(13,qe,5,1,"div",8)(14,Ue,17,6,"div",10),n(),m(15,"br"),a(16,"section",11)(17,"h1",12),s(18,"Listado turnos"),n(),a(19,"div",13),g(20,Xe,23,12,"div",14),n()()()(),g(21,rt,47,18,"div",15)),e&2&&(c(6),p("ngIf",o.mensaje()),c(3),p("ngForOf",o.especialidades()),c(),p("ngIf",o.especialidadSeleccionada),c(),p("ngIf",o.loadingFechas),c(),p("ngIf",o.fechasDisponibles().length),c(),p("ngIf",o.fechaSeleccionada&&o.horasParaFecha().length),c(),p("ngIf",o.horarioSeleccionado),c(6),p("ngForOf",o.turnos()),c(),p("ngIf",o.encuestaModalVisible()))},dependencies:[j,$,ve,ee,q,te,K,Ee,U,X,Z,ie,ne,Te,ae,L,V,H],styles:['.turnos-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondoClinica-JNWCIARF.jpg");background-size:cover;background-position:center;min-height:100vh;display:flex;justify-content:center;padding:2rem}.turnos-card[_ngcontent-%COMP%]{background-color:#ffffffe6;padding:2rem;border-radius:1rem;width:100%;max-width:900px;box-shadow:0 0 15px #0000004d;display:flex;flex-direction:column;gap:2rem;max-height:90vh;overflow-y:auto}.panel-seleccion[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.panel-turnos[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.fechas-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.fecha-btn[_ngcontent-%COMP%], .hora-btn[_ngcontent-%COMP%]{margin:0}.turnos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}.turno-card[_ngcontent-%COMP%]{min-height:180px}.acciones-turno[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:1rem}.action-btn[_ngcontent-%COMP%]{margin:0}.especialidad-btn[_ngcontent-%COMP%]{background:none;border:0;padding:0;outline:0}.especialidad-btn[_ngcontent-%COMP%]:hover{transform:scale(1.06);transition:transform .2s ease}.especialista-btn[_ngcontent-%COMP%]{display:inline-block;padding:0;border:none;background:none;outline:none}.especialista-btn[_ngcontent-%COMP%]:hover{transform:scale(1.06)}.especialista-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:80px}.nombre-label[_ngcontent-%COMP%]{font-size:.75rem;text-align:center;line-height:1.1;margin-top:.25rem}button.active[_ngcontent-%COMP%]{background-color:#0d6efd!important;color:#fff}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btn-salir[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background-color:#3546dc;color:#fff;padding:.4rem .9rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;z-index:10;transition:background-color .3s ease}.btn-salir[_ngcontent-%COMP%]:hover{background-color:#16067d}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:start;justify-content:center;padding-top:5vh;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:700px;padding:2rem;box-shadow:0 0 12px #0000004d}.modal-card[_ngcontent-%COMP%]   select.form-select[_ngcontent-%COMP%]{background-color:#eef2ff;border:2px solid #3546dc;border-radius:8px;color:#333;font-weight:500;padding:.5rem;font-size:1rem;transition:border-color .3s ease,box-shadow .2s ease}.modal-card[_ngcontent-%COMP%]   select.form-select[_ngcontent-%COMP%]:focus{border-color:#16067d;box-shadow:0 0 0 3px #3546dc4d;outline:none}.modal-card[_ngcontent-%COMP%]   select.form-select[_ngcontent-%COMP%]{width:100%}.modal-card[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:8px;font-weight:700;padding:.5rem 1.2rem;transition:background-color .3s ease,transform .2s ease}.modal-card[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838;transform:scale(1.03)}.modal-card[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;border-radius:8px;font-weight:700;padding:.5rem 1.2rem;transition:background-color .3s ease,transform .2s ease}.modal-card[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6268;transform:scale(1.03)}.turnos-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondoClinica-JNWCIARF.jpg");background-size:cover;background-position:center;height:100vh;overflow:hidden;display:flex;justify-content:center;padding:2rem}.turnos-card[_ngcontent-%COMP%]{background-color:#ffffffe6;padding:2rem;border-radius:1rem;width:100%;max-width:900px;box-shadow:0 0 15px #0000004d;display:flex;flex-direction:column;gap:2rem;height:100%;max-height:100%;overflow-y:auto}']})};function st(i,t){if(i&1&&m(0,"app-mensaje",23),i&2){let e=t.ngIf;p("tipo",e.tipo)("mensaje",e.texto)}}function ct(i,t){if(i&1){let e=b();a(0,"div",24)(1,"button",25),f("click",function(){let r=u(e).$implicit,l=d();return _(l.actualizarFiltroEspecialidad(r.nombre))}),m(2,"img",26),n(),a(3,"small",27),s(4),n()()}if(i&2){let e=t.$implicit,o=d();c(),M("active",o.filtro().filtroEspecialidad===e.nombre),I("aria-label",e.nombre),c(),p("src",e.imagen_url||"/assets/img/placeholder-esp.png",k)("alt",e.nombre),c(2),E(e.nombre)}}function lt(i,t){if(i&1){let e=b();a(0,"button",28),f("click",function(){let r=u(e).$implicit,l=d();return _(l.seleccionarEspecialista(r))}),m(1,"img",29),n()}if(i&2){let e=t.$implicit,o=d();M("active",e===o.pacienteSeleccionado),c(),p("src",e.avatar_url||"/assets/img/placeholder-user.png",k)}}function dt(i,t){i&1&&(a(0,"div",30),m(1,"div",31),a(2,"div",32),s(3,"Cargando..."),n()())}function pt(i,t){if(i&1){let e=b();a(0,"button",35),T(1,"date"),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarFecha(r))}),s(2),T(3,"date"),n()}if(i&2){let e=t.$implicit,o=d(2);M("active",e===o.fechaSeleccionada),I("aria-label","Fecha "+w(1,4,e,"fullDate")),c(2),S(" ",w(3,7,e,"dd/MM")," ")}}function mt(i,t){if(i&1&&(a(0,"div",17)(1,"label",6),s(2,"Fechas disponibles"),n(),a(3,"div",33),g(4,pt,4,10,"button",34),n()()),i&2){let e=d();c(4),p("ngForOf",e.fechasDisponibles())}}function ut(i,t){if(i&1){let e=b();a(0,"button",37),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarHorario({horario:r,fecha:l.fechaSeleccionada}))}),s(1),n()}if(i&2){let e=t.$implicit,o=d(2);c(),S(" ",o.formatearHora(e)," ")}}function _t(i,t){if(i&1&&(a(0,"div",17)(1,"label",6),s(2,"Horarios disponibles"),n(),a(3,"div",33),g(4,ut,2,1,"button",36),n()()),i&2){let e=d();c(4),p("ngForOf",e.horasParaFecha())}}function ft(i,t){if(i&1){let e=b();a(0,"div",38)(1,"p")(2,"strong"),s(3,"Especialista:"),n(),s(4),n(),a(5,"p")(6,"strong"),s(7,"Paciente:"),n(),s(8),n(),a(9,"p")(10,"strong"),s(11,"Fecha y hora:"),n(),s(12),T(13,"date"),n(),a(14,"div",39)(15,"button",40),f("click",function(){u(e);let r=d();return _(r.confirmarTurno())}),s(16,"Confirmar turno"),n(),a(17,"button",41),f("click",function(){u(e);let r=d();return _(r.cancelarSeleccion())}),s(18,"Cancelar"),n()()()}if(i&2){let e=d();c(4),S(" ",e.nombrePaciente," "),c(4),P("",e.especialistaSeleccionado==null?null:e.especialistaSeleccionado.nombre," ",e.especialistaSeleccionado==null?null:e.especialistaSeleccionado.apellido,""),c(4),P(" ",w(13,5,e.horarioSeleccionado.fecha,"fullDate")," - ",e.horarioSeleccionado.horario,"")}}function gt(i,t){if(i&1){let e=b();a(0,"div",48)(1,"input",54),f("input",function(r){u(e);let l=d().$implicit,v=d();return _(v.actualizarComentario(l.id,r.target.value))}),n()()}}function ht(i,t){if(i&1){let e=b();a(0,"button",55),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.aceptarTurno(r))}),s(1,"Aceptar"),n()}}function bt(i,t){if(i&1){let e=b();a(0,"button",56),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.cancelarTurno(r))}),s(1,"Cancelar"),n()}}function xt(i,t){if(i&1){let e=b();a(0,"button",57),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.rechazarTurno(r))}),s(1,"Rechazar"),n()}}function vt(i,t){if(i&1){let e=b();a(0,"button",58),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.mostrarModalFinalizar(r))}),s(1,"Finalizar"),n()}}function Ct(i,t){if(i&1){let e=b();a(0,"button",59),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.verResena(r))}),s(1," Ver Rese\xF1a "),n()}}function St(i,t){if(i&1){let e=b();a(0,"button",58),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.mostrarModalFinalizar(r))}),s(1,"Ver Historia Clinica"),n()}}function Et(i,t){if(i&1&&(a(0,"div",42)(1,"div",43)(2,"h5",44),s(3),n(),a(4,"p",45)(5,"strong"),s(6,"Paciente:"),n(),s(7),m(8,"br"),a(9,"strong"),s(10,"Fecha:"),n(),s(11),T(12,"date"),m(13,"br"),a(14,"strong"),s(15,"Hora:"),n(),s(16),n(),a(17,"span",46),s(18),n(),g(19,gt,2,0,"div",47),a(20,"div",48),g(21,ht,2,0,"button",49)(22,bt,2,0,"button",50)(23,xt,2,0,"button",51)(24,vt,2,0,"button",52)(25,Ct,2,0,"button",53)(26,St,2,0,"button",52),n()()()),i&2){let e=t.$implicit,o=d();c(3),E(e.especialidad),c(4),P(" ",e.nombre_paciente," ",e.apellido_paciente,""),c(4),S(" ",w(12,13,e.fecha_turno,"fullDate"),""),c(5),S(" ",e.hora_turno," "),c(2),E(e.estado),c(),p("ngIf",o.puedeCancelar(e)||o.puedeRechazar(e)||o.puedeFinalizar(e)),c(2),p("ngIf",o.puedeAceptar(e)),c(),p("ngIf",o.puedeCancelar(e)),c(),p("ngIf",o.puedeRechazar(e)),c(),p("ngIf",o.puedeFinalizar(e)),c(),p("ngIf",o.puedeVerResena(e)),c(),p("ngIf",o.puedeVerResena(e))}}function Tt(i,t){if(i&1){let e=b();a(0,"div",60)(1,"div",61)(2,"h5",17),s(3,"Historia Cl\xEDnica"),n(),a(4,"form",62)(5,"div",63)(6,"div",64),m(7,"input",65),n(),a(8,"div",64),m(9,"input",66),n(),a(10,"div",64),m(11,"input",67),n(),a(12,"div",64),m(13,"input",68),n(),a(14,"div",64),m(15,"input",69),n(),a(16,"div",64),m(17,"input",70),n(),a(18,"div",64),m(19,"input",71),n(),a(20,"div",64),m(21,"input",72),n(),a(22,"div",64),m(23,"input",73),n(),a(24,"div",64),m(25,"input",74),n()(),a(26,"div",75)(27,"label",76),s(28,"Nivel de dolor (0 a 100)"),n(),m(29,"input",77),n(),a(30,"div",75)(31,"label",78),s(32,"Nivel de glucosa"),n(),m(33,"input",79),n(),a(34,"div",80),m(35,"input",81),a(36,"label",82),s(37,"\xBFFuma actualmente?"),n()()(),m(38,"br"),a(39,"div",83)(40,"button",84),f("click",function(){u(e);let r=d();return _(r.guardarHistoria())}),s(41,"Guardar"),n(),a(42,"button",85),f("click",function(){u(e);let r=d();return _(r.cerrarModal())}),s(43,"Cancelar"),n()(),a(44,"small",86),s(45),n()()()}if(i&2){let e=d();c(4),p("formGroup",e.historiaForm),c(41),E(e.mensajeModal())}}var se=class i{db=y(B);auth=y(W);fb=y(oe);pacientes=x([]);horariosDisponibles=x([]);horarioSeleccionado=null;loadingFechas=!1;turnos=x([]);especialidades=x([]);filtro=x({filtroEspecialidad:"",filtroPaciente:""});comentario=x({});usuarioActual=null;modalVisible=x(!1);turnoSeleccionado=null;mensajeModal=x("");historiaForm;mensaje=x(null);pacienteSeleccionado=null;especialistaSeleccionado=null;nombrePaciente="";nombreEspecialistaSeleccionado="";fechasDisponibles=x([]);horariosPorDia=x([]);fechaSeleccionada=null;especialidadSeleccionada=null;ngOnInit(){return h(this,null,function*(){this.usuarioActual=yield this.auth.getUsuarioActualAsync(),this.historiaForm=this.fb.group({altura:["",C.required],peso:["",C.required],temperatura:["",C.required],presion:["",C.required],clave1:["",C.required],valor1:["",C.required],clave2:["",C.required],valor2:["",C.required],clave3:["",C.required],valor3:["",C.required],rangoControl:[50,[C.required,C.min(0),C.max(100)]],numeroControl:[null,[C.required,C.min(0)]],switchControl:[!1,C.required]}),yield this.cargarDatos(),console.log("OnINIT"),console.log(this.usuarioActual)})}cargarDatos(){return h(this,null,function*(){if(!this.usuarioActual||(yield this.auth.getPerfilActual())!=="especialista")return;let[t,e,o,r]=yield Promise.all([this.db.obtenerTurnosPorUsuario(this.usuarioActual.id,"especialista"),this.db.obtenerUsuarioActual(this.usuarioActual.id),this.db.obtenerEspecialidadesConImagen(),this.db.obtenerTodosLosUsuarios()]),l=t.map(D=>O(F({},D),{fecha_turno:new Date(D.fecha_hora),hora_turno:new Date(D.fecha_hora).toTimeString().substring(0,5)}));this.turnos.set(l);let v=e.especialidades||[],Ie=o.filter(D=>v.includes(D.nombre));this.especialidades.set(Ie),this.pacientes.set(r.filter(D=>D.perfil==="paciente")),this.nombrePaciente=e.apellido+" "+e.nombre,console.log("FUNCION cargarDatos",this.nombrePaciente),console.log("FUNCION cargarDatos FIN")})}cumpleFiltro=t=>{let e=this.filtro(),o=!e.filtroEspecialidad||t.especialidad===e.filtroEspecialidad;this.especialidadSeleccionada=e.filtroEspecialidad,console.log(this.especialidadSeleccionada);let r=!e.filtroPaciente||t.nombre_paciente.toLowerCase().includes(e.filtroPaciente.toLowerCase())||t.apellido_paciente.toLowerCase().includes(e.filtroPaciente.toLowerCase());return o&&r};puedeCancelar=t=>!["aceptado","realizado","rechazado","cancelado"].includes(t.estado);puedeRechazar=t=>!["aceptado","realizado","cancelado"].includes(t.estado);puedeAceptar=t=>!["realizado","cancelado","rechazado"].includes(t.estado);puedeFinalizar=t=>t.estado==="aceptado";puedeVerResena=t=>t.estado==="realizado"&&!!t.comentario_especialista;verResena(t){this.mensaje.set(null),setTimeout(()=>{this.mensaje.set({texto:`Rese\xF1a del especialista:

${t.comentario_especialista}`,tipo:"info"})})}cancelarTurno(t){return h(this,null,function*(){let e=this.comentario()[t.id];e&&(yield this.db.cancelarTurno(t.id,e),yield this.cargarDatos())})}rechazarTurno(t){return h(this,null,function*(){let e=this.comentario()[t.id];e&&(yield this.db.rechazarTurno(t.id,e),yield this.cargarDatos())})}aceptarTurno(t){return h(this,null,function*(){yield this.db.aceptarTurno(t.id),yield this.cargarDatos()})}mostrarModalFinalizar(t){console.log("Abriendo modal..."),this.turnoSeleccionado=t,this.modalVisible.set(!0),this.historiaForm.reset(),this.mensajeModal.set("")}cerrarModal(){this.modalVisible.set(!1),this.turnoSeleccionado=null}guardarHistoria(){return h(this,null,function*(){if(!this.turnoSeleccionado)return;if(this.historiaForm.invalid){this.mensajeModal.set("Complete todos los campos.");return}let t=this.historiaForm.value,e={[t.clave1]:t.valor1,[t.clave2]:t.valor2,[t.clave3]:t.valor3,nivel_dolor:t.rangoControl,glucosa:t.numeroControl,fuma:t.switchControl?"S\xED":"No"},o={paciente_id:this.turnoSeleccionado.paciente_id,altura:t.altura,peso:t.peso,temperatura:t.temperatura,presion:t.presion,datos_extra:e};try{yield this.db.guardarHistoriaClinica(o);let r=this.comentario()[this.turnoSeleccionado.id]||"";yield this.db.finalizarTurno(this.turnoSeleccionado.id,r),this.cerrarModal(),yield this.cargarDatos()}catch{this.mensajeModal.set("Error al guardar la historia cl\xEDnica.")}})}actualizarComentario(t,e){this.comentario.set(O(F({},this.comentario()),{[t]:e}))}actualizarFiltroEspecialidad(t){this.filtro.set(O(F({},this.filtro()),{filtroEspecialidad:t}))}actualizarFiltroPaciente(t){this.filtro.set(O(F({},this.filtro()),{filtroPaciente:t}))}cerrarSesion(){return h(this,null,function*(){yield this.auth.logout(),window.location.href="/home"})}seleccionarEspecialista(t){return h(this,null,function*(){console.log("seleccionarEspecialista"),this.especialistaSeleccionado=t,this.especialidades.set(this.especialidades().slice(0,10)),this.nombreEspecialistaSeleccionado=`${t.nombre} ${t.apellido}`,this.resetHorarios(),this.loadingFechas=!0,console.log("antes de  obtenerFechasDisponibles"),console.log(this.usuarioActual.id);let e=yield this.db.obtenerFechasDisponibles(this.usuarioActual.id,14);if(console.log("despues de  obtenerFechasDisponibles"),console.log(e),this.loadingFechas=!1,!e.length){this.mensaje.set({texto:"El especialista no tiene horarios disponibles en los pr\xF3ximos 15 d\xEDas.",tipo:"warning"});return}this.fechasDisponibles.set(e)})}resetHorarios(){this.horariosDisponibles.set([]),this.fechasDisponibles.set([]),this.horariosPorDia.set([]),this.horarioSeleccionado=null}resetSelecciones(t=!1){t||(this.pacienteSeleccionado=this.pacienteSeleccionado),this.especialistaSeleccionado=null,this.horariosDisponibles.set([]),this.horarioSeleccionado=null}seleccionarFecha(t){return h(this,null,function*(){this.fechaSeleccionada=t,console.log("SELECCIONA FECHA"),console.log(this.especialistaSeleccionado.user_auth_id),console.log("FUNCION seleccionarFecha");try{console.log(this.usuarioActual.id,t);let o=(yield this.db.obtenerHorariosDisponibles(this.usuarioActual.id,t))?.map(r=>r.horario_disponible)||[];this.horariosDisponibles.set(o)}catch(e){console.error("Error al obtener horarios disponibles:",e)}})}horasParaFecha(){return this.horariosDisponibles()}seleccionarHorario(t){console.log("FUNCION ANTES DE seleccionarHorario: paciente_id ",this.especialistaSeleccionado.user_auth_id),console.log("FUNCION ANTES DE seleccionarHorario: especialista_id ",this.usuarioActual.id),console.log("FUNCION ANTES DE seleccionarHorario: especialidad ",this.especialidadSeleccionada),this.horarioSeleccionado=t}formatearHora(t){let[e,o]=t.split(":"),r=+e,l=r>=12?"pm":"am";return r=r%12,r===0&&(r=12),`${r.toString().padStart(2,"0")}:${o} ${l}`}cancelarSeleccion(){this.resetHorarios(),this.especialistaSeleccionado=null,this.nombreEspecialistaSeleccionado=""}confirmarTurno(){return h(this,null,function*(){if(this.especialistaSeleccionado&&this.usuarioActual&&this.horarioSeleccionado&&this.especialidadSeleccionada){let t=`${this.horarioSeleccionado.fecha}T${this.horarioSeleccionado.horario}`;yield this.db.solicitarTurno({paciente_id:this.especialistaSeleccionado.user_auth_id,especialista_id:this.usuarioActual.id,especialidad:this.especialidadSeleccionada,fecha_hora:t,estado:"solicitado"}),yield this.cargarDatos(),this.mensaje.set({texto:"Turno creado.",tipo:"success"}),this.cancelarSeleccion()}else console.warn("Faltan datos para confirmar el turno:",{especialistaSeleccionado:this.especialistaSeleccionado,usuarioActual:this.usuarioActual,horarioSeleccionado:this.horarioSeleccionado,especialidadSeleccionada:this.especialidadSeleccionada}),this.mensaje.set({texto:"Faltan datos para confirmar el turno. Verific\xE1 todos los campos.",tipo:"warning"})})}seleccionarEspecialidad(t){this.especialidadSeleccionada=t,this.resetSelecciones(),this.resetHorarios()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=z({type:i,selectors:[["app-mis-turnos-especialista"]],standalone:!1,decls:36,vars:10,consts:[[1,"turnos-wrapper"],[1,"btn-salir",3,"click"],[1,"turnos-card"],[1,"text-center","mb-4"],[3,"tipo","mensaje",4,"ngIf"],[1,"panel-seleccion"],[1,"form-label"],[1,"especialidades-container"],["class","especialidad-card text-center",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"limpiar-btn",3,"click"],[1,"bloque-seleccion"],[1,"contenedor-botones"],["botonesRedondos","","class","btn-item",3,"active","click",4,"ngFor","ngForOf"],["class","spinner-wrapper text-center my-4",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","alert alert-info confirm-card",4,"ngIf"],[1,"panel-turnos"],[1,"mb-3"],[1,"form-label","mt-3"],["type","text","placeholder","Ingrese nombre o apellido",1,"form-control","buscar-input",3,"input","value"],[1,"turnos-grid"],["class","card turno-card",4,"ngFor","ngForOf"],["class","modal-backdrop",4,"ngIf"],[3,"tipo","mensaje"],[1,"especialidad-card","text-center"],["botonesRedondos","",1,"especialidad-btn",3,"click"],["loading","lazy",3,"src","alt"],[1,"nombre-label","mt-1","d-block"],["botonesRedondos","",1,"btn-item",3,"click"],["alt","paciente",3,"src"],[1,"spinner-wrapper","text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"fechas-container"],["botonesRectangulares","","class","fecha-btn",3,"active","click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"fecha-btn",3,"click"],["botonesRectangulares","","class","hora-btn",3,"click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"hora-btn",3,"click"],[1,"alert","alert-info","confirm-card"],[1,"botones-confirmacion"],["botonesRectangulares","",1,"btn-confirmar",3,"click"],["botonesRectangulares","",1,"btn-cancelar",3,"click"],[1,"card","turno-card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-info","text-dark"],["class","acciones-turno",4,"ngIf"],[1,"acciones-turno"],["botonesRectangulares","","class","btn btn-success btn-sm action-btn",3,"click",4,"ngIf"],["botonesRectangulares","","class","btn btn-warning btn-sm action-btn",3,"click",4,"ngIf"],["botonesRectangulares","","class","btn btn-danger btn-sm action-btn",3,"click",4,"ngIf"],["botonesRectangulares","","class","btn btn-primary btn-sm action-btn",3,"click",4,"ngIf"],["botonesRectangulares","","class","btn btn-info btn-sm action-btn",3,"click",4,"ngIf"],["type","text","placeholder","Comentario...",1,"form-control","comentario-input",3,"input"],["botonesRectangulares","",1,"btn","btn-success","btn-sm","action-btn",3,"click"],["botonesRectangulares","",1,"btn","btn-warning","btn-sm","action-btn",3,"click"],["botonesRectangulares","",1,"btn","btn-danger","btn-sm","action-btn",3,"click"],["botonesRectangulares","",1,"btn","btn-primary","btn-sm","action-btn",3,"click"],["botonesRectangulares","",1,"btn","btn-info","btn-sm","action-btn",3,"click"],[1,"modal-backdrop"],[1,"modal-card"],[3,"formGroup"],[1,"row","g-2"],[1,"col-6"],["placeholder","Altura","formControlName","altura",1,"form-control"],["placeholder","Peso","formControlName","peso",1,"form-control"],["placeholder","Temperatura","formControlName","temperatura",1,"form-control"],["placeholder","Presi\xF3n","formControlName","presion",1,"form-control"],["placeholder","Clave 1","formControlName","clave1",1,"form-control"],["placeholder","Valor 1","formControlName","valor1",1,"form-control"],["placeholder","Clave 2","formControlName","clave2",1,"form-control"],["placeholder","Valor 2","formControlName","valor2",1,"form-control"],["placeholder","Clave 3","formControlName","clave3",1,"form-control"],["placeholder","Valor 3","formControlName","valor3",1,"form-control"],[1,"col-12"],["for","rangoControl",1,"form-label"],["type","range","id","rangoControl","min","0","max","100","formControlName","rangoControl",1,"form-range"],["for","numeroControl",1,"form-label"],["type","number","id","numeroControl","formControlName","numeroControl",1,"form-control"],[1,"col-12","form-check","form-switch"],["type","checkbox","id","switchControl","formControlName","switchControl",1,"form-check-input"],["for","switchControl",1,"form-check-label"],[1,"d-flex","gap-2","mt-3"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"text-danger"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"button",1),f("click",function(){return o.cerrarSesion()}),s(2,"Salir"),n(),a(3,"div",2)(4,"h2",3),s(5,"Mis Turnos"),n(),g(6,st,1,2,"app-mensaje",4),a(7,"section",5)(8,"label",6),s(9,"Filtrar por Especialidad"),n(),a(10,"div",7),g(11,ct,5,6,"div",8),a(12,"button",9),f("click",function(){return o.actualizarFiltroEspecialidad("")}),s(13,"Limpiar"),n()(),m(14,"Br")(15,"Br"),a(16,"div",10)(17,"label",6),s(18,"Pacientes"),n(),a(19,"div",11),g(20,lt,2,3,"button",12),n()(),g(21,dt,4,0,"div",13)(22,mt,5,1,"div",14)(23,_t,5,1,"div",14)(24,ft,19,8,"div",15),n(),a(25,"section",16)(26,"h2",17),s(27,"Listado turnos"),n(),a(28,"label",18),s(29,"Buscar Paciente (nombre o apellido)"),n(),a(30,"input",19),f("input",function(l){return o.actualizarFiltroPaciente(l.target.value)}),n(),m(31,"br")(32,"br"),a(33,"div",20),g(34,Et,27,16,"div",21),n()(),g(35,Tt,46,2,"div",22),n()()),e&2&&(c(6),p("ngIf",o.mensaje()),c(5),p("ngForOf",o.especialidades()),c(9),p("ngForOf",o.pacientes()),c(),p("ngIf",o.loadingFechas),c(),p("ngIf",o.fechasDisponibles().length),c(),p("ngIf",o.fechaSeleccionada&&o.horasParaFecha().length),c(),p("ngIf",o.horarioSeleccionado),c(6),p("value",o.filtro().filtroPaciente),c(4),p("ngForOf",o.turnos().filter(o.cumpleFiltro)),c(),p("ngIf",o.modalVisible()))},dependencies:[j,$,ee,q,Se,te,K,U,X,ie,ne,ae,L,V,H],styles:['.turnos-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondoClinica-JNWCIARF.jpg");background-size:cover;background-position:center;min-height:100vh;display:flex;justify-content:center;padding:2rem}.turnos-card[_ngcontent-%COMP%]{background-color:#ffffffe6;padding:2rem;border-radius:1rem;width:100%;max-width:1100px;box-shadow:0 0 15px #0000004d}.panel-seleccion[_ngcontent-%COMP%]{margin-bottom:2rem}.especialidades-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1.5rem;align-items:flex-end}.especialidad-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:70px}.especialidad-btn[_ngcontent-%COMP%]{background:none;border:0;padding:0;outline:0;width:60px;height:60px}.especialidad-btn[_ngcontent-%COMP%]:hover{transform:scale(1.06);transition:transform .2s ease}.nombre-label[_ngcontent-%COMP%]{font-size:.75rem;text-align:center;line-height:1.1;margin-top:.25rem}.limpiar-btn[_ngcontent-%COMP%]{height:36px;align-self:flex-end;margin-left:1rem}.buscar-input[_ngcontent-%COMP%]{max-width:300px;margin-top:1rem}.panel-turnos[_ngcontent-%COMP%]{margin-top:3rem}.turnos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem}.turno-card[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1rem;box-shadow:0 2px 8px #0000001a}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.card-text[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.4;margin-bottom:.5rem}.badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.4em .6em;margin-top:.5rem}.acciones-turno[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:column;gap:.5rem}.comentario-input[_ngcontent-%COMP%]{width:100%}.action-btn[_ngcontent-%COMP%]{min-width:110px}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;width:100%;max-width:500px;box-shadow:0 5px 20px #0000004d}.btn-salir[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background-color:#3546dc;color:#fff;padding:.4rem .9rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;z-index:10;transition:background-color .3s ease}.btn-salir[_ngcontent-%COMP%]:hover{background-color:#16067d}.bloque-seleccion[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600}']})};function wt(i,t){if(i&1){let e=b();a(0,"button",16),f("click",function(){let r=u(e).$implicit,l=d();return _(l.seleccionarPaciente(r))}),m(1,"img",17),n()}if(i&2){let e=t.$implicit,o=d();M("active",e===o.pacienteSeleccionado),c(),p("src",e.avatar_url||"/assets/img/placeholder-user.png",k)}}function yt(i,t){if(i&1){let e=b();a(0,"button",16),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarEspecialidad(r.nombre))}),m(1,"img",18),n()}if(i&2){let e=t.$implicit,o=d(2);M("active",e.nombre===o.especialidadSeleccionada),c(),p("src",e.imagen_url||"/assets/img/placeholder-esp.png",k)}}function Mt(i,t){if(i&1&&(a(0,"div",4)(1,"label",5),s(2,"Especialidades"),n(),a(3,"div",6),g(4,yt,2,3,"button",7),n()()),i&2){let e=d();c(4),p("ngForOf",e.especialidades())}}function kt(i,t){if(i&1){let e=b();a(0,"button",16),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarEspecialista(r))}),m(1,"img",19),n()}if(i&2){let e=t.$implicit,o=d(2);M("active",e===o.especialistaSeleccionado),c(),p("src",e.avatar_url||"/assets/img/placeholder-user.png",k)}}function Pt(i,t){if(i&1&&(a(0,"div",4)(1,"label",5),s(2,"Especialistas"),n(),a(3,"div",6),g(4,kt,2,3,"button",7),n()()),i&2){let e=d();c(4),p("ngForOf",e.especialistasFiltrados())}}function Ft(i,t){i&1&&(a(0,"div",20),m(1,"div",21),a(2,"div",22),s(3,"Cargando..."),n()())}function Ot(i,t){if(i&1){let e=b();a(0,"button",26),T(1,"date"),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarFecha(r))}),s(2),T(3,"date"),n()}if(i&2){let e=t.$implicit,o=d(2);M("active",e===o.fechaSeleccionada),I("aria-label","Fecha "+w(1,4,e,"fullDate")),c(2),S(" ",w(3,7,e,"dd/MM")," ")}}function It(i,t){if(i&1&&(a(0,"div",23)(1,"label",5),s(2,"Fechas disponibles"),n(),a(3,"div",24),g(4,Ot,4,10,"button",25),n()()),i&2){let e=d();c(4),p("ngForOf",e.fechasDisponibles())}}function Vt(i,t){if(i&1){let e=b();a(0,"button",28),f("click",function(){let r=u(e).$implicit,l=d(2);return _(l.seleccionarHorario({horario:r,fecha:l.fechaSeleccionada}))}),s(1),n()}if(i&2){let e=t.$implicit,o=d(2);c(),S(" ",o.formatearHora(e)," ")}}function Dt(i,t){if(i&1&&(a(0,"div",23)(1,"label",5),s(2,"Horarios disponibles"),n(),a(3,"div",24),g(4,Vt,2,1,"button",27),n()()),i&2){let e=d();c(4),p("ngForOf",e.horasParaFecha())}}function At(i,t){if(i&1){let e=b();a(0,"div",29)(1,"p")(2,"strong"),s(3,"Paciente:"),n(),s(4),n(),a(5,"p")(6,"strong"),s(7,"Especialista:"),n(),s(8),n(),a(9,"p")(10,"strong"),s(11,"Fecha y hora:"),n(),s(12),T(13,"date"),n(),a(14,"div",30)(15,"button",31),f("click",function(){u(e);let r=d();return _(r.confirmarTurno())}),s(16,"Confirmar turno"),n(),a(17,"button",32),f("click",function(){u(e);let r=d();return _(r.cancelarSeleccion())}),s(18,"Cancelar"),n()()()}if(i&2){let e=d();c(4),P(" ",e.pacienteSeleccionado==null?null:e.pacienteSeleccionado.nombre," ",e.pacienteSeleccionado==null?null:e.pacienteSeleccionado.apellido," "),c(4),P(" ",e.especialistaSeleccionado==null?null:e.especialistaSeleccionado.nombre," ",e.especialistaSeleccionado==null?null:e.especialistaSeleccionado.apellido,""),c(4),P(" ",w(13,6,e.horarioSeleccionado.fecha,"fullDate")," - ",e.horarioSeleccionado.horario,"")}}function Rt(i,t){if(i&1){let e=b();a(0,"div",39)(1,"div",40)(2,"input",41),N("ngModelChange",function(r){u(e);let l=d().$implicit;return R(l.motivo_cancelacion,r)||(l.motivo_cancelacion=r),_(r)}),n(),a(3,"button",42),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.cancelarTurno(r))}),s(4,"Cancelar"),n()(),a(5,"div",40)(6,"input",43),N("ngModelChange",function(r){u(e);let l=d().$implicit;return R(l.motivo_rechazo,r)||(l.motivo_rechazo=r),_(r)}),n(),a(7,"div",44)(8,"button",42),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.rechazarTurno(r))}),s(9,"Rechazar"),n(),a(10,"button",42),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.aceptarTurno(r))}),s(11,"Aceptar"),n()()()()}if(i&2){let e=d().$implicit;c(2),A("ngModel",e.motivo_cancelacion),c(4),A("ngModel",e.motivo_rechazo)}}function Nt(i,t){if(i&1){let e=b();a(0,"div",39)(1,"input",45),N("ngModelChange",function(r){u(e);let l=d().$implicit;return R(l.comentario_especialista,r)||(l.comentario_especialista=r),_(r)}),n(),a(2,"button",42),f("click",function(){u(e);let r=d().$implicit,l=d();return _(l.finalizarTurno(r))}),s(3,"Finalizar"),n()()}if(i&2){let e=d().$implicit;c(),A("ngModel",e.comentario_especialista)}}function zt(i,t){if(i&1&&(a(0,"div",33)(1,"div",34)(2,"h5",35),s(3),n(),a(4,"p",36)(5,"strong"),s(6,"Paciente:"),n(),s(7),m(8,"br"),a(9,"strong"),s(10,"Especialista:"),n(),s(11),m(12,"br"),a(13,"strong"),s(14,"Fecha:"),n(),s(15),T(16,"date"),m(17,"br"),a(18,"strong"),s(19,"Hora:"),n(),s(20),n(),a(21,"span",37),s(22),n(),g(23,Rt,12,2,"div",38)(24,Nt,4,1,"div",38),n()()),i&2){let e=t.$implicit;c(3),E(e.especialidad),c(4),S(" ",e.nombre_paciente,""),c(4),S(" ",e.nombre_especialista,""),c(4),S(" ",w(16,8,e.fecha_turno,"fullDate"),""),c(5),S(" ",e.hora_turno," "),c(2),E(e.estado),c(),p("ngIf",e.estado==="solicitado"),c(),p("ngIf",e.estado==="aceptado")}}var ce=class i{db=y(B);auth=y(W);turnos=x([]);pacientes=x([]);especialidades=x([]);especialistasFiltrados=x([]);horariosDisponibles=x([]);mensaje=x(null);loadingFechas=!1;pacienteSeleccionado=null;especialidadSeleccionada=null;especialistaSeleccionado=null;horarioSeleccionado=null;fechaSeleccionada=null;fechasDisponibles=x([]);horariosPorDia=x([]);nombreEspecialistaSeleccionado="";seleccionarFecha(t){return h(this,null,function*(){this.fechaSeleccionada=t;try{console.log(this.especialistaSeleccionado.user_auth_id,t);let o=(yield this.db.obtenerHorariosDisponibles(this.especialistaSeleccionado.user_auth_id,t))?.map(r=>r.horario_disponible)||[];this.horariosDisponibles.set(o)}catch(e){console.error("Error al obtener horarios disponibles:",e)}})}seleccionarHorario(t){this.horarioSeleccionado=t}ngOnInit(){return h(this,null,function*(){yield this.cargarDatos()})}cargarDatos(){return h(this,null,function*(){if(!(yield this.auth.getUsuarioActualAsync())||(yield this.auth.getPerfilActual())!=="admin")return;let[e,o,r]=yield Promise.all([this.db.obtenerTodosLosTurnos(),this.db.obtenerTodosLosUsuarios(),this.db.obtenerEspecialidadesConImagen()]);this.turnos.set(e.map(l=>O(F({},l),{fecha_turno:new Date(l.fecha_hora),hora_turno:new Date(l.fecha_hora).toTimeString().substring(0,5)}))),this.pacientes.set(o.filter(l=>l.perfil==="paciente")),this.especialidades.set(r)})}seleccionarPaciente(t){this.pacienteSeleccionado=t,this.resetSelecciones(!0),this.especialidades.set(this.especialidades().slice(0,10))}seleccionarEspecialidad(t){this.especialidadSeleccionada=t,this.resetSelecciones(),this.filtrarEspecialistas(),this.resetHorarios()}seleccionarEspecialista(t){return h(this,null,function*(){this.especialistaSeleccionado=t,this.nombreEspecialistaSeleccionado=`${t.nombre} ${t.apellido}`,this.resetHorarios(),this.loadingFechas=!0,console.log("antes de  obtenerFechasDisponibles");let e=yield this.db.obtenerFechasDisponibles(t.user_auth_id,14);if(console.log("despues de  obtenerFechasDisponibles"),console.log(e),this.loadingFechas=!1,!e.length){this.mensaje.set({texto:"El especialista no tiene horarios disponibles en los pr\xF3ximos 15 d\xEDas.",tipo:"warning"});return}this.fechasDisponibles.set(e)})}resetHorarios(){this.horariosDisponibles.set([]),this.fechasDisponibles.set([]),this.horariosPorDia.set([]),this.horarioSeleccionado=null}confirmarTurno(){return h(this,null,function*(){if(!this.pacienteSeleccionado||!this.especialistaSeleccionado||!this.horarioSeleccionado)return;let t=`${this.horarioSeleccionado.fecha}T${this.horarioSeleccionado.horario}`;yield this.db.solicitarTurno({paciente_id:this.pacienteSeleccionado.user_auth_id,especialista_id:this.especialistaSeleccionado.user_auth_id,especialidad:this.especialidadSeleccionada,fecha_hora:t,estado:"solicitado"}),yield this.cargarDatos(),this.mensaje.set({texto:"Turno creado.",tipo:"success"}),this.cancelarSeleccion()})}cancelarSeleccion(){this.resetHorarios(),this.especialidadSeleccionada=null,this.especialistaSeleccionado=null,this.nombreEspecialistaSeleccionado=""}resetSelecciones(t=!1){t||(this.pacienteSeleccionado=this.pacienteSeleccionado),this.especialistaSeleccionado=null,this.horariosDisponibles.set([]),this.horarioSeleccionado=null}cancelarTurno(t){return h(this,null,function*(){if(!t.motivo_cancelacion){this.mensaje.set({texto:"Ingrese motivo.",tipo:"error"});return}yield this.db.cancelarTurno(t.id,t.motivo_cancelacion),yield this.cargarDatos()})}aceptarTurno(t){return h(this,null,function*(){yield this.db.aceptarTurno(t.id),yield this.cargarDatos()})}rechazarTurno(t){return h(this,null,function*(){if(!t.motivo_rechazo){this.mensaje.set({texto:"Ingrese motivo.",tipo:"error"});return}yield this.db.rechazarTurno(t.id,t.motivo_rechazo),yield this.cargarDatos()})}finalizarTurno(t){return h(this,null,function*(){if(!t.comentario_especialista){this.mensaje.set({texto:"Ingrese comentario.",tipo:"error"});return}yield this.db.finalizarTurno(t.id,t.comentario_especialista),yield this.cargarDatos()})}filtrarEspecialistas(){return h(this,null,function*(){let t=yield this.db.obtenerTodosLosUsuarios();this.especialistasFiltrados.set(t.filter(e=>e.perfil==="especialista"&&e.especialidades?.includes(this.especialidadSeleccionada)))})}cerrarSesion(){return h(this,null,function*(){yield this.auth.logout(),window.location.href="/home"})}horasParaFecha(){return this.horariosDisponibles()}formatearHora(t){let[e,o]=t.split(":"),r=+e,l=r>=12?"pm":"am";return r=r%12,r===0&&(r=12),`${r.toString().padStart(2,"0")}:${o} ${l}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=z({type:i,selectors:[["app-admin-turnos"]],standalone:!1,decls:21,vars:8,consts:[[1,"turnos-wrapper"],[1,"btn-salir",3,"click"],[1,"turnos-card"],[1,"panel-alta-turno"],[1,"bloque-seleccion"],[1,"form-label"],[1,"contenedor-botones"],["botonesRedondos","","class","btn-item",3,"active","click",4,"ngFor","ngForOf"],["class","bloque-seleccion",4,"ngIf"],["class","spinner-wrapper text-center my-4",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","alert alert-info confirm-card",4,"ngIf"],[1,"panel-turnos-grid"],[1,"titulo-listado"],[1,"turnos-grid"],["class","card turno-card",4,"ngFor","ngForOf"],["botonesRedondos","",1,"btn-item",3,"click"],["alt","paciente",3,"src"],["alt","especialidad",3,"src"],["alt","especialista",3,"src"],[1,"spinner-wrapper","text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"mb-3"],[1,"fechas-container"],["botonesRectangulares","","class","fecha-btn",3,"active","click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"fecha-btn",3,"click"],["botonesRectangulares","","class","hora-btn",3,"click",4,"ngFor","ngForOf"],["botonesRectangulares","",1,"hora-btn",3,"click"],[1,"alert","alert-info","confirm-card"],[1,"botones-confirmacion"],["botonesRectangulares","",1,"btn-confirmar",3,"click"],["botonesRectangulares","",1,"btn-cancelar",3,"click"],[1,"card","turno-card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-info","text-dark"],["class","acciones-turno",4,"ngIf"],[1,"acciones-turno"],[1,"campo-accion"],["placeholder","Motivo",1,"form-control",3,"ngModelChange","ngModel"],["botonesRectangulares","",1,"btn-rect",3,"click"],["placeholder","Motivo rechazo",1,"form-control",3,"ngModelChange","ngModel"],[1,"fila-botones"],["placeholder","Comentario",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"button",1),f("click",function(){return o.cerrarSesion()}),s(2,"Salir"),n(),a(3,"div",2)(4,"section",3)(5,"div",4)(6,"label",5),s(7,"Pacientes"),n(),a(8,"div",6),g(9,wt,2,3,"button",7),n()(),g(10,Mt,5,1,"div",8)(11,Pt,5,1,"div",8)(12,Ft,4,0,"div",9)(13,It,5,1,"div",10)(14,Dt,5,1,"div",10)(15,At,19,9,"div",11),n(),a(16,"section",12)(17,"h3",13),s(18,"Listado de turnos"),n(),a(19,"div",14),g(20,zt,25,11,"div",15),n()()()()),e&2&&(c(9),p("ngForOf",o.pacientes()),c(),p("ngIf",o.pacienteSeleccionado),c(),p("ngIf",o.especialidadSeleccionada),c(),p("ngIf",o.loadingFechas),c(),p("ngIf",o.fechasDisponibles().length),c(),p("ngIf",o.fechaSeleccionada&&o.horasParaFecha().length),c(),p("ngIf",o.horarioSeleccionado),c(5),p("ngForOf",o.turnos()))},dependencies:[j,$,q,U,Z,L,V,H],styles:['.turnos-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondoClinica-JNWCIARF.jpg");background-size:cover;background-position:center;min-height:100vh;display:flex;justify-content:center;padding:2rem}.turnos-card[_ngcontent-%COMP%]{background:#ffffffed;padding:2rem;border-radius:1rem;width:100%;max-width:900px;display:flex;flex-direction:column;gap:2rem;box-shadow:0 0 15px #0000004d}.btn-salir[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:#3546dc;color:#fff;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;padding:.45rem 1rem;transition:background .3s}.btn-salir[_ngcontent-%COMP%]:hover{background:#16067d}.panel-alta-turno[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.bloque-seleccion[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600}.contenedor-botones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.btn-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;object-fit:cover}.btn-item.active[_ngcontent-%COMP%]{outline:3px solid #0d6efd}.btn-rect[_ngcontent-%COMP%]{min-width:90px;padding:.35rem .75rem}.btn-rect.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.confirm-card[_ngcontent-%COMP%]{border-radius:.75rem}.panel-turnos-grid[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:1rem}.titulo-listado[_ngcontent-%COMP%]{margin:0 0 .5rem;font-weight:700}.turnos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;align-items:start}.turno-card[_ngcontent-%COMP%]{min-height:210px}.acciones-turno[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:.75rem}.btn-confirmar[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:.4rem .9rem;border-radius:.5rem}.btn-cancelar[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:.4rem .9rem;border-radius:.5rem}.btn-rect.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}.btn-rect.active[_ngcontent-%COMP%]{background-color:#d0e3ff;color:#0a2f6b;font-weight:700}.btn-confirmar[_ngcontent-%COMP%], .btn-cancelar[_ngcontent-%COMP%]{color:#0a2f6b;font-weight:700}.btn-confirmar[_ngcontent-%COMP%]:hover, .btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#d0e3ff;color:#0a2f6b}.botones-confirmacion[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem;flex-wrap:wrap;justify-content:flex-start}.campo-accion[_ngcontent-%COMP%]{margin-bottom:1rem}.fila-botones[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem;flex-wrap:wrap}.turnos-wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondoClinica-JNWCIARF.jpg");background-size:cover;background-position:center;height:100vh;overflow:hidden;display:flex;justify-content:center;padding:2rem}.turnos-card[_ngcontent-%COMP%]{background-color:#ffffffe6;padding:2rem;border-radius:1rem;width:100%;max-width:900px;box-shadow:0 0 15px #0000004d;display:flex;flex-direction:column;gap:2rem;height:100%;max-height:100%;overflow-y:auto}']})};var jt=[{path:"paciente",component:re},{path:"especialista",component:se},{path:"admin",component:ce}],le=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Y({type:i});static \u0275inj=J({imports:[pe.forChild(jt),pe]})};var Oe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Y({type:i});static \u0275inj=J({imports:[Ce,we,ye,le]})};export{Oe as TurnosModule};
