import{c as y,d as w,f as b,g as v,h as S,i as P,j as R}from"./chunk-WVTYPJII.js";import{Da as r,Ea as o,Ga as m,Ia as u,Ka as l,La as g,Ma as p,Oa as M,S as _,Xa as W,Ya as c,ma as s,na as C}from"./chunk-QLBQFL2W.js";import"./chunk-5PDZ6P5C.js";import{h as f}from"./chunk-RS6LHQUM.js";var h=W(c.apiUrl,c.publicAnonKey),T=(()=>{class d{constructor(n){this.router=n,this.name="",this.age=0,this.avatarFile=null,this.username="",this.password=""}register(){h.auth.signUp({email:this.username,password:this.password}).then(({data:n,error:i})=>{i?console.error("Error:",i.message):(console.log("User registered:",n.user),this.saveUserData(n.user))})}saveUserData(n){let i=this.saveFile().then(t=>{t&&h.from("users-data").insert([{authId:n.id,name:this.name,age:this.age,avatarUrl:t.path}]).then(({data:a,error:e})=>{e?console.error("Error:",e.message):this.router.navigate(["/home"])})})}saveFile(){return f(this,null,function*(){let{data:n,error:i}=yield h.storage.from("images").upload(`users/${this.avatarFile?.name}`,this.avatarFile,{cacheControl:"3600",upsert:!1});return n})}onFileSelected(n){this.avatarFile=n.target.files[0]}static{this.\u0275fac=function(i){return new(i||d)(C(y))}}static{this.\u0275cmp=_({type:d,selectors:[["app-register"]],standalone:!0,features:[M],decls:13,vars:4,consts:[[1,"register-container"],["type","text","placeholder","Username",1,"register-input",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",1,"register-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Nombre",1,"register-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Edad",1,"register-input",3,"ngModelChange","ngModel"],["type","file",1,"register-input",3,"change"],[1,"register-button",3,"click"],[1,"login-link-container"],["routerLink","../login",1,"login-link"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"h3"),u(2,"Registro"),o(),r(3,"input",1),p("ngModelChange",function(e){return g(t.username,e)||(t.username=e),e}),o(),r(4,"input",2),p("ngModelChange",function(e){return g(t.password,e)||(t.password=e),e}),o(),r(5,"input",3),p("ngModelChange",function(e){return g(t.name,e)||(t.name=e),e}),o(),r(6,"input",4),p("ngModelChange",function(e){return g(t.age,e)||(t.age=e),e}),o(),r(7,"input",5),m("change",function(e){return t.onFileSelected(e)}),o(),r(8,"button",6),m("click",function(){return t.register()}),u(9," Registro "),o(),r(10,"div",7)(11,"a",8),u(12,"Login"),o()()()),i&2&&(s(3),l("ngModel",t.username),s(),l("ngModel",t.password),s(),l("ngModel",t.name),s(),l("ngModel",t.age))},dependencies:[R,b,P,v,S,w],styles:[".register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.register-input[_ngcontent-%COMP%]{width:300px;padding:10px;margin:5px 0;border:1px solid #ccc;border-radius:4px}.register-input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.register-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px}.register-button[_ngcontent-%COMP%]:hover{background-color:#218838}.login-link-container[_ngcontent-%COMP%]{margin-top:20px}.login-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-size:14px}"]})}}return d})();export{T as RegisterComponent};
